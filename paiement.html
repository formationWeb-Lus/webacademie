<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Instructions de paiement</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --primary:#198754; --bg1:#00c6ff; --bg2:#007bff;
      --card:#fff; --muted:#6b7280; --line:#e5e7eb; --radius:16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      min-height:100vh; display:grid; place-items:center;
      background:linear-gradient(135deg,var(--bg1),var(--bg2)); padding:24px;
    }
    .container{
      width:min(720px,100%); background:var(--card); border-radius:var(--radius);
      box-shadow:0 12px 30px rgba(0,0,0,.16); padding:28px;
    }
    h1{margin:0 0 8px; font-size:26px}
    .muted{color:var(--muted); margin:0 0 18px}
    .panel{
      background:#f8fafc; border:1px solid var(--line); border-radius:12px;
      padding:16px; margin:12px 0 20px;
    }
    .row{display:flex; gap:12px; margin:6px 0; flex-wrap:wrap}
    .label{min-width:150px; color:#334155; font-weight:600}
    .badge{display:inline-flex; align-items:center; gap:8px; padding:6px 10px;
      border-radius:999px; border:1px solid var(--line); background:#fff}
    .badge svg{height:22px}
    .form-group{margin:12px 0}
    .form-group label{display:block; font-weight:700; margin-bottom:6px}
    .form-group input{
      width:100%; padding:12px; border:1px solid var(--line); border-radius:10px; font-size:16px;
    }
    .btn{
      width:100%; padding:14px 16px; border:0; border-radius:12px;
      background:var(--primary); color:#fff; font-size:16px; font-weight:700; cursor:pointer;
      margin-top:10px;
    }
    .success{margin-top:14px; text-align:center; color:#1f9d55; font-weight:700}
    .error{margin-top:14px; text-align:center; color:#dc2626; font-weight:700}
    .back{display:inline-block; margin-bottom:12px; text-decoration:none; color:#0d6efd}
  </style>

  <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WLRKCTMW');</script>
<!-- End Google Tag Manager -->

</head>
<body>
  <div class="container">
    <a class="back" href="infodecompte.html">‚Üê Modifier le choix</a>
    <h1>Instructions de paiement</h1>
    <p class="muted">
      Veuillez payer avec les informations ci-dessous, puis captez le nom de ce compte  pour confirmer.
    </p>

    <div class="panel" id="details"></div>

    <div class="form-group">
  <label>Nom de compte trouv√© lors de paiement :</label>
  <input id="nomCompte" type="text" placeholder="Ex. Alexandre Mwambe" />
</div>

<p style="font-size: 0.9em; font-style: italic; color: #555; margin-top: 8px; margin-bottom: 12px;">
  Si vous n'arrivez pas √† bien vous inscrire, veuillez contacter ce num√©ro : 
  <a href="tel:+243995271831" style="color: #0d6efd; text-decoration: underline;">+243 995 271 831</a> 
  ou envoyez un email √† : 
  <a href="mailto:webacademyinfor@gmail.com" style="color: #0d6efd; text-decoration: underline;">webacademyinfor@gmail.com</a>. Merci !
</p>



<button class="btn" onclick="confirmer()">S‚Äôinscrire</button>
<div id="msg"></div>


  <script>
    const params = new URLSearchParams(location.search);
    const raw = params.get('data');
    let brand, label, numero;

    // ‚úÖ Noms cach√©s (jamais affich√©s √† l‚Äôutilisateur)
    const validNames = {
      "airtel": ["JIRESSE LUSA"],
      "orange": ["ANASTA KONGOLO", "ANASTA-KONGOLO"],
      "mpesa": ["BENEDITTE MAZALA", "BENEDITTE MWANGALA"],
      "EQUITY BANK": ["BENEDICTE MAZALA", "BENEDICTE-MAZALA MWANGALA", "BENEDICTE MWANGALA MAZALA"]
    };

    function logo(brandKey){
      switch(brandKey){
        case 'airtel': return `<div class="badge"><svg viewBox="0 0 120 36"><rect width="120" height="36" rx="18" fill="#E4002B"/><text x="60" y="24" text-anchor="middle" font-size="16" fill="#fff" font-weight="700">airtel</text></svg><span>Airtel</span></div>`;
        case 'orange': return `<div class="badge"><svg viewBox="0 0 120 36"><rect width="120" height="36" rx="8" fill="#FF7900"/><text x="60" y="24" text-anchor="middle" font-size="16" fill="#fff" font-weight="700">orange</text></svg><span>Orange</span></div>`;
        case 'mpesa': return `<div class="badge"><svg viewBox="0 0 120 36"><rect width="120" height="36" rx="8" fill="#1FB25A"/><text x="60" y="24" text-anchor="middle" font-size="16" fill="#fff" font-weight="700">M-Pesa</text></svg><span>M-Pesa</span></div>`;
        case 'EQUITY BANK': return `<div class="badge"><svg viewBox="0 0 140 36"><rect width="140" height="36" rx="8" fill="#101010"/><text x="70" y="24" text-anchor="middle" font-size="16" fill="#F9C900" font-weight="700">EQUITY</text></svg><span>Equity Bank</span></div>`;
        default: return '';
      }
    }

    if(raw){
      [brand, label, numero] = raw.split('|');
      document.getElementById('details').innerHTML = `
        <div class="row"><div class="label">Moyen :</div><div>${label}</div></div>
        <div class="row"><div class="label">Num√©ro :</div><div>${numero}</div></div>
        <div class="row"><div class="label">Ic√¥ne :</div><div>${logo(brand)}</div></div>
        <hr style="border:none;border-top:1px solid #e5e7eb;margin:12px 0">
        <div>üí° <b>Astuce :</b> quand vous avez termin√© de payer, prenez le <b>nom exact</b> de ce compte trouv√© lors de paiement et saisissez-le ci-dessous  pour valider votre inscription.</div>
      `;
    } else {
      document.getElementById('details').textContent = "Aucune donn√©e re√ßue. Retournez √† la page pr√©c√©dente.";
    }

    function confirmer(){
      const nom = document.getElementById('nomCompte').value.trim().toUpperCase();
      const msg = document.getElementById('msg');
      msg.innerHTML = "";

      if(!nom){ 
        msg.innerHTML = `<div class="error">‚ö†Ô∏è Veuillez entrer un nom.</div>`; 
        return; 
      }

      if(validNames[brand] && validNames[brand].includes(nom)){
    msg.innerHTML = `<div class="success">‚úÖ Paiement confirm√© via ${label} (${numero}).</div>`;
    setTimeout(()=>{ 
        window.location.href="merci.html"; // <-- redirection vers la page des remerciements
    }, 2000);
} else {
    msg.innerHTML = `<div class="error">‚ùå Nom incorrect. Veuillez saisir le nom exact du compte trouv√© lors de paiement.</div>`;
}

    }
  </script>
</body>
</html>
